CREATE TABLE User
(
  Username VARCHAR(30) NOT NULL,
  PhotoURL 30 NOT NULL,
  PasswordHash VARCHAR(30) NOT NULL,
  Name VARCHAR(20) NOT NULL,
  Surname VARCHAR(30) NOT NULL,
  PhoneNumber VARCHAR(10) NOT NULL,
  eMail VARCHAR(30) NOT NULL,
  Role VARCHAR(20) NOT NULL,
  Confirmed 1 NOT NULL,
  PRIMARY KEY (Username)
);

CREATE TABLE Call
(
  CallName VARCHAR(30) NOT NULL,
  Address VARCHAR(30) NOT NULL,
  Finished 1 NOT NULL,
  Description VARCHAR(30) NOT NULL,
  PRIMARY KEY (CallName)
);

CREATE TABLE Photo
(
  PhotoURL 30 NOT NULL,
  CallName VARCHAR(30) NOT NULL,
  PRIMARY KEY (PhotoURL),
  FOREIGN KEY (CallName) REFERENCES Call(CallName)
);

CREATE TABLE Responder
(
  Qualification VARCHAR(30) NOT NULL,
  LocationLatitute 30 NOT NULL,
  LocationLongitude 30 NOT NULL,
  Availability 1 NOT NULL,
  Username VARCHAR(30) NOT NULL,
  CallName VARCHAR(30) NOT NULL,
  StationName VARCHAR(30) NOT NULL,
  PRIMARY KEY (Username),
  FOREIGN KEY (Username) REFERENCES User(Username),
  FOREIGN KEY (CallName) REFERENCES Call(CallName),
  FOREIGN KEY (StationName) REFERENCES Station(StationName)
);

CREATE TABLE Station
(
  StationName VARCHAR(30) NOT NULL,
  StationChief VARCHAR(30) NOT NULL,
  PRIMARY KEY (StationName),
  FOREIGN KEY (StationChief) REFERENCES Responder(Username)
);

CREATE TABLE CallRequest
(
  ResponderRole VARCHAR(30) NOT NULL,
  Urgency INT NOT NULL,
  ResponderResponse  NOT NULL,
  Comment VARCHAR(30) NOT NULL,
  ResponderUsername VARCHAR(30) NOT NULL,
  CallName VARCHAR(30) NOT NULL,
  DIspacherUsername VARCHAR(30) NOT NULL,
  PRIMARY KEY (ResponderUsername, CallName),
  FOREIGN KEY (ResponderUsername) REFERENCES Responder(Username),
  FOREIGN KEY (CallName) REFERENCES Call(CallName),
  FOREIGN KEY (DIspacherUsername) REFERENCES User(Username)
);

CREATE TABLE Task
(
  IDTask INT NOT NULL,
  Comment VARCHAR(30) NOT NULL,
  Description VARCHAR(30) NOT NULL,
  Address VARCHAR(30) NOT NULL,
  ResponderUsername VARCHAR(30) NOT NULL,
  DispatcherUsername VARCHAR(30) NOT NULL,
  PRIMARY KEY (IDTask),
  FOREIGN KEY (ResponderUsername) REFERENCES Responder(Username),
  FOREIGN KEY (DispatcherUsername) REFERENCES User(Username)
);

CREATE TABLE CallComments
(
  Comment VARCHAR(30) NOT NULL,
  LocationLatitude 30 NOT NULL,
  LocationLongitude 30 NOT NULL,
  CallName VARCHAR(30) NOT NULL,
  Username VARCHAR(30) NOT NULL,
  PRIMARY KEY (CallName, Username),
  FOREIGN KEY (CallName) REFERENCES Call(CallName),
  FOREIGN KEY (Username) REFERENCES Responder(Username)
);